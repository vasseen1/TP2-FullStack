<app-notification></app-notification>

<div *ngIf="artiste; else noArtist" class="artist-container">
  <!-- Partie gauche : informations -->
    <div class="artist-details">
        <h2>Détails de l'artiste</h2>
        <p><strong>Label : </strong>{{artiste.label}}</p>
        <p><strong>Evenements :</strong></p>
        <ul class="events-infos-list">
          <li *ngFor="let event of events | async" class="event-chip" >
            {{ event.label }}
          </li>
          <li *ngIf="(events | async)?.length === 0" class="no-events">
            Aucun évènement associé
          </li>
        </ul>


        <button class="supprimer" (click)="supprimerArtist()" [disabled]="isDeleted">
            Supprimer
        </button>
    </div>
    
  <!-- Partie droite : édition -->
    <div class="artist-edit" *ngIf="editedArtiste">
      <h2>Modifier l'artiste</h2>

      <label>Label :</label>
      <input type="text" [(ngModel)]="editedArtiste.label" />

      <div class="edit-actions">
        <button (click)="saveArtist()">Sauvegarder</button>
      </div>
      <div class="artist-events">
        <h2>Gérer les évènements :</h2>

        <ng-container *ngIf="events | async as eventList; else noEvents">
          <div *ngIf="eventList.length > 0; else noEvents">
            <p><strong>Événements associés :</strong></p>
            <ul>
              <li *ngFor="let event of eventList">
                {{ event.label }}
                <button (click)="removeArtist(event.id)">Retirer</button>
              </li>
            </ul>
          </div>
        </ng-container>

        <ng-template #noEvents>
          <p>Aucun évènement associé à cet artiste.</p>
        </ng-template>
        <!-- Ajouter un évènement -->
        <div class="add-event-section">
          <label>Ajouter un évènement :</label>
          <select [(ngModel)]="selectedEventId">
            <option [ngValue]="null">-- Choisir un évènement --</option>

            <option *ngFor="let event of allEvents" [value]="event.id">
              {{ event.label }}
            </option>
          </select>

          <button (click)="addEvent()" >Ajouter</button>
        </div>
      </div>

    </div>
</div>

<!-- Si l'artiste est inexistant -->
<ng-template #noArtist>
  <p class="no-artist-message">
    Il n'y a pas d'évènement disponible à cet identifiant
  </p>
</ng-template>



