<app-notification></app-notification>

<div *ngIf="evenement; else noEvent" class="event-container">
  <!-- Partie gauche : informations -->
  <div class="event-details">
    <h2>Détails de l'évènement</h2>
    <p><strong>Label :</strong> {{ evenement.label }}</p>
    <p><strong>Début :</strong> {{ evenement.startDate | date }}</p>
    <p><strong>Fin :</strong> {{ evenement.endDate | date }}</p>
    <p><strong>Artistes : </strong></p>
    <ul class="artists-infos-list">
      <li *ngFor="let artist of evenement.artists" class="artist-chip">
        {{ artist.label }}
      </li>
      <li *ngIf="evenement.artists.length === 0" class="no-events">
        Aucun artiste associé
      </li>
    </ul>

    <button (click)="supprimerEvent()" class="supprimer" [disabled]="isDeleted">Supprimer</button>
  </div>

  <!-- Partie droite : édition -->
  <div class="event-edit" *ngIf="editedEvent">
    <h2>Modifier l'évènement</h2>

    <label>Label :</label>
    <input type="text" [(ngModel)]="editedEvent.label" />

    <label>Date de début :</label>
    <input type="date" [(ngModel)]="editedEvent.startDate" />

    <label>Date de fin :</label>
    <input type="date" [(ngModel)]="editedEvent.endDate" />

    <div class="edit-actions">
      <button (click)="saveEvent()">Sauvegarder</button>
    </div>

    <div class="event-artists">
      <h2>Gérer les artistes</h2>
      <ng-container *ngIf="evenement.artists.length > 0; else noArtists">
      

        <!-- Liste des artistes de l'événement -->
        <div *ngIf="evenement?.artists?.length; else noArtists">
            <p><strong>Artistes associés :</strong></p>
            <ul>
              <li *ngFor="let artist of evenement.artists">
                {{ artist.label }}
                <button (click)="removeArtist(artist.id)">Retirer</button>
              </li>
            </ul>
        </div>
      </ng-container>
      <div class="add-artist-section">
        <label>Ajouter un artiste :</label>
        <select [(ngModel)]="selectedArtistId">
          <option [ngValue]="null">-- Choisir un artiste --</option>

          <option *ngFor="let artist of allArtists" [value]="artist.id">
            {{ artist.label }}
          </option>
        </select>

        <button (click)="addArtist()">Ajouter</button>
      </div>
    </div>


      <ng-template #noArtists>
        <p>Aucun artiste associé à cet évènement.</p>
      </ng-template>

      <!-- Ajouter un artiste -->
      
  </div>
</div>


<!-- S'il ny a pas d'events, on affiche une page d'erreur -->
<ng-template #noEvent>
  <p class="no-event-message">
    Il n'y a pas d'évènement disponible à cet identifiant
  </p>
</ng-template>


